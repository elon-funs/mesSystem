(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["login"],{"04d4":function(e,t,a){},"2c52":function(e,t,a){},"45b5":function(e,t,a){},"481b":function(e,t,a){},"495a":function(e,t,a){"use strict";var s=a("2c52"),n=a.n(s);n.a},"49f2":function(e,t,a){"use strict";a("7c36"),a("80b9"),a("e47e"),a("8077"),a("34fd"),a("df3f"),a("a6bd")},"5cf8":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"scan"},[e._m(0),a("footer",[a("button",{on:{click:e.startRecognize}},[e._v("1.创建控件")]),a("button",{on:{click:e.startScan}},[e._v("2.开始扫描")]),a("button",{on:{click:e.cancelScan}},[e._v("3.结束扫描")]),a("button",{on:{click:e.closeScan}},[e._v("4.关闭控件")])])])},n=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"bcid"}},[a("div",{staticStyle:{height:"40%"}}),a("p",{staticClass:"tip"},[e._v("...载入中...")])])}],c=(a("f548"),null),o={data:function(){return{codeUrl:""}},methods:{startRecognize:function(){var e=this;function t(t,a,s){switch(t){case plus.barcode.QR:t="QR";break;case plus.barcode.EAN13:t="EAN13";break;case plus.barcode.EAN8:t="EAN8";break;default:t="其它"+t;break}a=a.replace(/\n/g,""),e.codeUrl=a,alert(a),e.closeScan()}window.plus&&(c=new plus.barcode.Barcode("bcid"),c.onmarked=t)},startScan:function(){window.plus&&c.start()},cancelScan:function(){window.plus&&c.cancel()},closeScan:function(){window.plus&&c.close()}}},i=o,r=(a("bc4a"),a("9ca4")),l=Object(r["a"])(i,s,n,!1,null,null,null);t["default"]=l.exports},8555:function(e,t,a){"use strict";var s=a("d601"),n=a("23c4"),c=a.n(n),o=a("35ea"),i=a("2a47"),r=a("6421"),l=a("d470"),u=a("88a6"),d=a("43c9"),p=Object(o["a"])("action-sheet"),m=p[0],f=p[1];function h(e,t,a,s){var n=t.title,o=t.cancelText,r=t.closeable;function p(){Object(i["a"])(s,"input",!1),Object(i["a"])(s,"cancel")}function m(){if(n)return e("div",{class:f("header")},[n,r&&e(l["a"],{attrs:{name:t.closeIcon},class:f("close"),on:{click:p}})])}function h(){if(a.default)return e("div",{class:f("content")},[a.default()])}function v(a,n){var c=a.disabled,o=a.loading,r=a.callback;function l(e){e.stopPropagation(),c||o||(r&&r(a),Object(i["a"])(s,"select",a,n),t.closeOnClickAction&&Object(i["a"])(s,"input",!1))}function u(){return o?e(d["a"],{class:f("loading-icon")}):[e("span",{class:f("name")},[a.name]),a.subname&&e("div",{class:f("subname")},[a.subname])]}return e("button",{attrs:{type:"button"},class:[f("item",{disabled:c,loading:o}),a.className],style:{color:a.color},on:{click:l}},[u()])}function g(){if(o)return[e("div",{class:f("gap")}),e("button",{attrs:{type:"button"},class:f("cancel"),on:{click:p}},[o])]}function b(){var s=(null==a.description?void 0:a.description())||t.description;if(s)return e("div",{class:f("description")},[s])}return e(u["a"],c()([{class:f(),attrs:{position:"bottom",round:t.round,value:t.value,overlay:t.overlay,duration:t.duration,lazyRender:t.lazyRender,lockScroll:t.lockScroll,getContainer:t.getContainer,closeOnPopstate:t.closeOnPopstate,closeOnClickOverlay:t.closeOnClickOverlay,safeAreaInsetBottom:t.safeAreaInsetBottom}},Object(i["b"])(s,!0)]),[m(),b(),t.actions&&t.actions.map(v),h(),g()])}h.props=Object(s["a"])({},r["b"],{title:String,actions:Array,duration:[Number,String],cancelText:String,description:String,getContainer:[String,Function],closeOnPopstate:Boolean,closeOnClickAction:Boolean,round:{type:Boolean,default:!0},closeable:{type:Boolean,default:!0},closeIcon:{type:String,default:"cross"},safeAreaInsetBottom:{type:Boolean,default:!0},overlay:{type:Boolean,default:!0},closeOnClickOverlay:{type:Boolean,default:!0}}),t["a"]=m(h)},8700:function(e,t,a){"use strict";var s=a("04d4"),n=a.n(s);n.a},a6bd:function(e,t,a){},ac2a:function(e,t,a){"use strict";a.r(t);var s,n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"content"},[a("p",{staticClass:"logo"}),a("p",{staticClass:"crm"},[e._v("盛彩印刷包装MES")]),a("p",[a("input",{directives:[{name:"model",rawName:"v-model",value:e.account,expression:"account"}],staticClass:"account",attrs:{type:"text",placeholder:"手机号码",value:""},domProps:{value:e.account},on:{input:function(t){t.target.composing||(e.account=t.target.value)}}})]),a("p",[a("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],staticClass:"password",attrs:{type:"password",placeholder:"密码",value:""},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}})]),a("div",{staticClass:"check flex-fs"},[a("van-checkbox",{attrs:{"icon-size":"14px",shape:"square"},model:{value:e.checked,callback:function(t){e.checked=t},expression:"checked"}},[e._v("记住密码")])],1),a("div",{staticClass:"submit",on:{click:e.submitLogin}},[e._v("登录")]),a("router-link",{staticClass:"forgetPassword",attrs:{to:{path:"/change_password"}}},[e._v("修改密码?")])],1),a("p",{staticClass:"bottom"},[e._v("*若没有账号,请联系管理员*")])])},c=[],o=(a("f548"),a("ce3c")),i=(a("7c36"),a("481b"),a("35ea")),r=a("fa2b"),l=a("5d34"),u=Object(i["a"])("checkbox-group"),d=u[0],p=u[1],m=d({mixins:[Object(l["b"])("vanCheckbox"),r["a"]],props:{max:[Number,String],disabled:Boolean,direction:String,iconSize:[Number,String],checkedColor:String,value:{type:Array,default:function(){return[]}}},watch:{value:function(e){this.$emit("change",e)}},methods:{toggleAll:function(e){if(!1!==e){var t=this.children;e||(t=t.filter((function(e){return!e.checked})));var a=t.map((function(e){return e.name}));this.$emit("input",a)}else this.$emit("input",[])}},render:function(){var e=arguments[0];return e("div",{class:p([this.direction])},[this.slots()])}}),f=(a("cc57"),a("e47e"),a("8077"),a("c4ae"),a("7078")),h=Object(i["a"])("checkbox"),v=h[0],g=h[1],b=v({mixins:[Object(f["a"])({bem:g,role:"checkbox",parent:"vanCheckbox"})],computed:{checked:{get:function(){return this.parent?-1!==this.parent.value.indexOf(this.name):this.value},set:function(e){this.parent?this.setParentValue(e):this.$emit("input",e)}}},watch:{value:function(e){this.$emit("change",e)}},methods:{toggle:function(e){var t=this;void 0===e&&(e=!this.checked),clearTimeout(this.toggleTask),this.toggleTask=setTimeout((function(){t.checked=e}))},setParentValue:function(e){var t=this.parent,a=t.value.slice();if(e){if(t.max&&a.length>=t.max)return;-1===a.indexOf(this.name)&&(a.push(this.name),t.$emit("input",a))}else{var s=a.indexOf(this.name);-1!==s&&(a.splice(s,1),t.$emit("input",a))}}}}),k=a("c24f"),_=a("c246"),w=a("ed08"),O={name:"登录",components:(s={},Object(o["a"])(s,b.name,b),Object(o["a"])(s,m.name,m),s),data:function(){return{checked:!0,account:"",password:""}},created:function(){_["a"].get("userInfo")&&_["a"].get("ntoken")&&this.$router.replace({path:"/index"})},mounted:function(){var e=_["a"].get("account_m"),t=_["a"].get("account_p");e&&t&&(t=t.replace("x19980731",""),t=t.replace("!857094/",""),this.account=e,this.password=t)},methods:{submitLogin:function(){var e=this;""==Object(w["e"])(this.account)?this.$dialog.message("请输入手机号"):""==Object(w["e"])(this.password)?this.$dialog.message("请输入密码"):Object(k["b"])({mobile:this.account,password:this.password}).then((function(t){var a=t.data;_["a"].set("ntoken",a.token),_["a"].set("userInfo",JSON.stringify(a)),e.checked&&(_["a"].set("account_m",e.account),_["a"].set("account_p","!857094/"+e.password+"x19980731")),e.$router.replace({path:"/index"})})).catch((function(t){e.$dialog.message(t.msg)}))}}},x=O,C=(a("495a"),a("9ca4")),y=Object(C["a"])(x,n,c,!1,null,"028bc4ef",null);t["default"]=y.exports},bc4a:function(e,t,a){"use strict";var s=a("45b5"),n=a.n(s);n.a},c242:function(e,t,a){"use strict";a.r(t);var s,n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"setting",on:{click:e.openSetting}},[a("van-icon",{attrs:{color:"gray",size:"20",name:"setting-o"}})],1),a("div",{staticClass:"content"},[a("p",{staticClass:"logo"}),a("p",{staticClass:"crm"},[e._v("个人资料修改")]),a("p",[a("input",{directives:[{name:"model",rawName:"v-model",value:e.user_nickname,expression:"user_nickname"}],staticClass:"account",attrs:{type:"text",placeholder:"用户昵称",value:""},domProps:{value:e.user_nickname},on:{input:function(t){t.target.composing||(e.user_nickname=t.target.value)}}})]),a("p",[a("input",{directives:[{name:"model",rawName:"v-model",value:e.old_pass,expression:"old_pass"}],staticClass:"password",attrs:{type:"password",placeholder:"旧密码",value:""},domProps:{value:e.old_pass},on:{input:function(t){t.target.composing||(e.old_pass=t.target.value)}}})]),a("p",[a("input",{directives:[{name:"model",rawName:"v-model",value:e.user_pass,expression:"user_pass"}],staticClass:"password",attrs:{type:"password",placeholder:"新密码",value:""},domProps:{value:e.user_pass},on:{input:function(t){t.target.composing||(e.user_pass=t.target.value)}}})]),a("p",[a("input",{directives:[{name:"model",rawName:"v-model",value:e.ruser_pass,expression:"ruser_pass"}],staticClass:"password",attrs:{type:"password",placeholder:"重复密码",value:""},domProps:{value:e.ruser_pass},on:{input:function(t){t.target.composing||(e.ruser_pass=t.target.value)}}})]),a("div",{staticClass:"submit",on:{click:e.submitLogin}},[e._v("确认修改")])]),a("van-action-sheet",{attrs:{actions:e.actions},on:{select:e.onSelect},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}})],1)},c=[],o=(a("f548"),a("ce3c")),i=(a("49f2"),a("8555")),r=(a("cc57"),a("733f"),a("d470")),l=a("c24f"),u=a("c246"),d=a("ed08"),p={name:"ChangePassword",components:(s={},Object(o["a"])(s,r["a"].name,r["a"]),Object(o["a"])(s,i["a"].name,i["a"]),s),data:function(){return{checked:!0,user_nickname:"",user_pass:"",old_pass:"",ruser_pass:"",show:!1,actions:[{name:"系统刷新"},{name:"退出登录"}]}},mounted:function(){var e=this;Object(l["a"])().then((function(t){var a=t.data;e.user_nickname=a.user.user_nickname})).catch((function(t){e.$dialog.message(t.msg)}))},methods:{openSetting:function(){this.show=!0},onSelect:function(e){"系统刷新"==e.name?(this.show=!1,u["a"].remove("ntoken"),this.$dialog.message("清除成功")):(this.show=!1,u["a"].remove("ntoken"),this.$router.replace({path:"/"}))},submitLogin:function(){var e=this;""==Object(d["e"])(this.user_nickname)?this.$dialog.message("请输入昵称"):""==Object(d["e"])(this.old_pass)?this.$dialog.message("请输入旧密码"):""==Object(d["e"])(this.user_pass)?this.$dialog.message("请输入新密码"):Object(d["e"])(this.user_pass)!=Object(d["e"])(this.ruser_pass)?this.$dialog.message("两次密码不一致"):Object(l["c"])({user_nickname:this.user_nickname,old_pass:this.old_pass,user_pass:this.user_pass}).then((function(t){t.data;e.$dialog.message("修改成功"),location.reload()})).catch((function(t){e.$dialog.message(t.msg)}))}}},m=p,f=(a("8700"),a("9ca4")),h=Object(f["a"])(m,n,c,!1,null,"303db4c9",null);t["default"]=h.exports},c4ae:function(e,t,a){}}]);
//# sourceMappingURL=login.bf91c388.js.map